(this.webpackJsonppart2_phonebook=this.webpackJsonppart2_phonebook||[]).push([[0],{39:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(15),a=t.n(c),o=t(4),u=t(3),i=t(2),s=function(e){return Object(r.jsxs)("div",{children:["filter shown with: ",Object(r.jsx)("input",{value:e.value,onChange:e.onChange})]})};var d=function(e){return Object(r.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:e.namevalue,onChange:e.namechange})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{value:e.numbervalue,onChange:e.numberchange})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var n=e.personsToShow,t=e.deletePerson;return Object(r.jsx)("div",{children:n.map((function(e){return Object(r.jsxs)("div",{children:[e.name," ",e.number,Object(r.jsx)("button",{onClick:function(){return t(e.id)},children:"delete"})]},e.name)}))})},b=t(5),j=t.n(b),f="/api/persons",h={getAll:function(){return j.a.get(f).then((function(e){return e.data}))},createNew:function(e){return j.a.post(f,e).then((function(e){return e.data}))},deletePerson:function(e){return j.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.status}))},updatePerson:function(e,n){return j.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))}},m=function(e){var n=e.message,t=e.isError,c={color:"green",border:"1px green solid",backgroundColor:"gray",borderRadius:10,textAlign:"center",padding:5,marginBottom:10},a=Object(o.a)(Object(o.a)({},c),{},{color:"red",borderColor:"red"});return n?Object(r.jsx)("div",{style:t?a:c,children:n}):null},O=function(){var e=Object(i.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1];Object(i.useEffect)((function(){console.log("starting to fetch data..."),h.getAll().then((function(e){return c(e)})).catch((function(e){return J("getAll rejected ".concat(e),!0)}))}),[]);var a=Object(i.useState)(""),b=Object(u.a)(a,2),j=b[0],f=b[1],O=Object(i.useState)(""),v=Object(u.a)(O,2),g=v[0],p=v[1],x=Object(i.useState)(""),w=Object(u.a)(x,2),S=w[0],C=w[1],k=Object(i.useState)(""),P=Object(u.a)(k,2),y=P[0],A=P[1],T=Object(i.useState)(!1),E=Object(u.a)(T,2),D=E[0],N=E[1],B=t.filter((function(e){return-1!==e.name.toLowerCase().search(S.toLowerCase())})),J=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];A(e),N(n),setTimeout((function(){return A(null)}),5e3)};return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(m,{message:y,isError:D}),Object(r.jsx)(s,{value:S,onChange:function(e){return C(e.target.value)}}),Object(r.jsx)("h3",{children:"add new"}),Object(r.jsx)(d,{onSubmit:function(e){e.preventDefault();var n=t.filter((function(e){return e.name===j}));if(g){if(0===n.length){var r={name:j,number:g};h.createNew(r).then((function(e){c(t.concat(e)),J("Added ".concat(e.name))})).catch((function(e){return J(e.statusText,!0)}))}else if(1===n.length&&n[0].number!==g&&window.confirm("".concat(n[0].name," is already exists, replace number?"))){var a=n[0];h.updatePerson(a.id,Object(o.a)(Object(o.a)({},a),{},{number:g})).then((function(e){c(t.map((function(n){return n.id!==a.id?n:e}))),J("Updated ".concat(e.name))})).catch((function(e){return J("".concat(a.name," was removed from the server"),!0)}))}f(""),p("")}},namevalue:j,namechange:function(e){return f(e.target.value)},numbervalue:g,numberchange:function(e){return p(e.target.value)}}),Object(r.jsx)("h3",{children:"Numbers"}),Object(r.jsx)(l,{personsToShow:B,deletePerson:function(e){window.confirm("Delete ".concat(t.find((function(n){return n.id===e})).name,"?"))&&h.deletePerson(e).then((function(n){if(204===n){var r=t.find((function(n){return n.id===e})).name;c(t.filter((function(n){return n.id!==e}))),J("Deleted ".concat(r))}})).catch((function(e){return J(e.statusText,!0)}))}})]})};a.a.render(Object(r.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.d38b3161.chunk.js.map