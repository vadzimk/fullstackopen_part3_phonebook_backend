{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/middleware.js","components/Notification.js","App.js","index.js"],"names":["Filter","props","value","onChange","PersonForm","onSubmit","namevalue","namechange","numbervalue","numberchange","type","Persons","personsToShow","deletePerson","map","person","name","number","onClick","id","baseUrl","mid","getAll","axios","get","then","res","data","createNew","newObj","post","delete","status","updatePerson","changedObj","put","Notification","message","isError","msgStyle","color","border","backgroundColor","borderRadius","textAlign","padding","marginBottom","errStyle","borderColor","style","App","useState","persons","setPersons","useEffect","console","log","catch","reason","notify","newName","setNewName","newNumber","setNewNumber","searchName","setSearchName","notificationMsg","setNotificationMsg","setIsError","filter","item","toLowerCase","search","msg","signalErr","setTimeout","e","target","preventDefault","match","length","newPersonObj","concat","err","statusText","window","confirm","objToUpdate","find","removedName","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d38b3161.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nexport const Filter = (props) => {\r\n    return (\r\n        <div>\r\n            filter shown with: <input value={props.value} onChange={props.onChange}/>\r\n        </div>\r\n    )\r\n}\r\nexport default Filter","import React from \"react\";\r\n\r\nexport function PersonForm(props) {\r\n    return (\r\n        <form onSubmit={props.onSubmit}>\r\n            <div>\r\n                name: <input value={props.namevalue} onChange={props.namechange}/>\r\n            </div>\r\n            <div>\r\n                number: <input value={props.numbervalue} onChange={props.numberchange}/>\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\nexport default PersonForm","import React from \"react\";\r\n\r\nexport const Persons = ({personsToShow, deletePerson}) => {\r\n    return (\r\n        <div>\r\n            {personsToShow.map(person =>\r\n                <div key={person.name}>{person.name} {person.number}\r\n                    <button onClick={() => deletePerson(person.id)}>delete</button>\r\n                </div>)}\r\n        </div>\r\n    )\r\n}\r\nexport default Persons","import axios from \"axios\";\r\n\r\n// 'http://127.0.0.1:3001/api/persons'\r\nconst baseUrl = '/api/persons'\r\nconst getAll = () => axios.get(baseUrl).then(res => res.data)\r\nconst createNew = (newObj) => axios.post(baseUrl, newObj).then(res => res.data)\r\nconst deletePerson = (id) => axios.delete(`${baseUrl}/${id}`).then(res => res.status)\r\nconst updatePerson = (id, changedObj) => axios.put(`${baseUrl}/${id}`, changedObj).then(res=>res.data)\r\n\r\n\r\nconst mid = {getAll, createNew, deletePerson, updatePerson}\r\nexport default mid","const Notification = ({message, isError}) => {\r\n\r\n    const msgStyle = {\r\n        color: \"green\",\r\n        border: \"1px green solid\",\r\n        backgroundColor: \"gray\",\r\n        borderRadius: 10,\r\n        textAlign: \"center\",\r\n        padding: 5,\r\n        marginBottom: 10\r\n    }\r\n\r\n    const errStyle={\r\n        ...msgStyle,\r\n        color: \"red\",\r\n        borderColor: \"red\",\r\n\r\n    }\r\n\r\n    if (!message)\r\n        return null\r\n    else\r\n        return (\r\n            <div style={isError ? errStyle : msgStyle}>\r\n                {message}\r\n            </div>\r\n        )\r\n}\r\n\r\nexport default Notification","import React, {useState, useEffect} from \"react\";\r\nimport Filter from \"./components/Filter\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport Persons from \"./components/Persons\";\r\n\r\nimport mid from \"./services/middleware\";\r\nimport Notification from \"./components/Notification\";\r\n\r\nconst App = () => {\r\n    const [persons, setPersons] = useState([])\r\n\r\n    const fetchData = () => {\r\n        console.log('starting to fetch data...')\r\n        mid.getAll().then(data => setPersons(data)).catch((reason) => notify(`getAll rejected ${reason}`, true))\r\n    }\r\n    useEffect(fetchData, [])\r\n\r\n\r\n    const [newName, setNewName] = useState('')  // controls form input element\r\n    const [newNumber, setNewNumber] = useState('')\r\n    const [searchName, setSearchName] = useState('')\r\n    const [notificationMsg, setNotificationMsg] = useState('')\r\n    const [isError, setIsError] = useState(false)\r\n    const personsToShow = persons.filter(item => item.name.toLowerCase().search(searchName.toLowerCase()) !== -1)\r\n\r\n\r\n\r\n    const addPerson = (e) => {\r\n        e.preventDefault()\r\n        const match = persons.filter(item => item.name === newName)\r\n        // console.log(match)\r\n\r\n        if (newNumber) {\r\n            if (match.length === 0) {  // check if already exists in the list\r\n                let newPersonObj = {\r\n                    name: newName,\r\n                    number: newNumber\r\n                }\r\n                mid.createNew(newPersonObj).then((data) => {\r\n                    setPersons(persons.concat(data))\r\n                    notify(`Added ${data.name}`)\r\n                }).catch((err)=>notify(err.statusText,true))\r\n\r\n            } else if (match.length === 1 && match[0].number !== newNumber && window.confirm(`${match[0].name} is already exists, replace number?`)) {\r\n                let objToUpdate = match[0]\r\n                mid.updatePerson(objToUpdate.id, {...objToUpdate, number: newNumber})\r\n                    .then(data => {\r\n                        setPersons(persons.map(item => item.id !== objToUpdate.id ? item : data))\r\n                        notify(`Updated ${data.name}`)\r\n                    }).catch((err)=>notify(`${objToUpdate.name} was removed from the server`, true))\r\n            }\r\n            setNewName('')\r\n            setNewNumber('')\r\n\r\n        }\r\n    }\r\n\r\n    const deletePerson = (id) => {\r\n        if (window.confirm(`Delete ${persons.find(item => item.id === id).name}?`)) {  // window confirmation dialogue\r\n            mid.deletePerson(id)\r\n                .then(status => {\r\n                    if(status === 204) {  // resource deleted gives status 204 - no content\r\n                        let removedName = persons.find((person)=>person.id ===id ).name\r\n                        setPersons(persons.filter(person => person.id !== id))\r\n                        notify(`Deleted ${removedName}`)\r\n                    }\r\n                }).catch((err)=>notify(err.statusText, true))\r\n        }\r\n    }\r\n\r\n    const notify=(msg, signalErr=false)=>{\r\n        setNotificationMsg(msg)\r\n        setIsError(signalErr)\r\n        setTimeout(()=>setNotificationMsg(null), 5000)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h2>Phonebook</h2>\r\n            <Notification message={notificationMsg} isError={isError}/>\r\n            <Filter value={searchName} onChange={e => setSearchName(e.target.value)}/>\r\n            <h3>add new</h3>\r\n            <PersonForm onSubmit={addPerson} namevalue={newName} namechange={e => setNewName(e.target.value)}\r\n                        numbervalue={newNumber} numberchange={e => setNewNumber(e.target.value)}/>\r\n            <h3>Numbers</h3>\r\n            <Persons personsToShow={personsToShow} deletePerson={deletePerson}/>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default App","import ReactDOM from 'react-dom';\nimport App from './App'\n\n\n\nReactDOM.render(<App/>, document.getElementById('root'))"],"sourceRoot":""}