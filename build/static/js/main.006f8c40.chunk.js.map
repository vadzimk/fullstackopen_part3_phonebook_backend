{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/personService.js","components/Notification.js","App.js","index.js"],"names":["Filter","props","value","onChange","PersonForm","onSubmit","namevalue","namechange","numbervalue","numberchange","type","Persons","personsToShow","deletePerson","map","person","name","number","onClick","id","baseUrl","personService","getAll","axios","get","then","res","data","createNew","newObj","post","delete","status","updatePerson","changedObj","put","Notification","message","isError","msgStyle","color","border","borderRadius","textAlign","padding","marginBottom","errStyle","borderColor","style","App","useState","persons","setPersons","useEffect","console","log","catch","reason","notify","newName","setNewName","newNumber","setNewNumber","searchName","setSearchName","notificationMsg","setNotificationMsg","setIsError","filter","item","toLowerCase","search","msg","signalErr","setTimeout","e","target","preventDefault","match","length","newPersonObj","concat","err","response","error","window","confirm","objToUpdate","find","removedName","statusText","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.006f8c40.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nexport const Filter = (props) => {\r\n    return (\r\n        <div>\r\n            filter shown with: <input value={props.value} onChange={props.onChange}/>\r\n        </div>\r\n    )\r\n}\r\nexport default Filter","import React from \"react\";\r\n\r\nexport function PersonForm(props) {\r\n    return (\r\n        <form onSubmit={props.onSubmit}>\r\n            <div>\r\n                name: <input value={props.namevalue} onChange={props.namechange}/>\r\n            </div>\r\n            <div>\r\n                number: <input value={props.numbervalue} onChange={props.numberchange}/>\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\nexport default PersonForm","import React from \"react\";\r\n\r\nexport const Persons = ({personsToShow, deletePerson}) => {\r\n    return (\r\n        <div>\r\n            {personsToShow.map(person =>\r\n                <div key={person.name}>{person.name} {person.number}\r\n                    <button onClick={() => deletePerson(person.id)}>delete</button>\r\n                </div>)}\r\n        </div>\r\n    )\r\n}\r\nexport default Persons","import axios from \"axios\";\r\n\r\n// 'http://127.0.0.1:3001/api/persons'\r\nconst baseUrl = '/api/persons'\r\nconst getAll = () => axios.get(baseUrl).then(res => res.data)\r\nconst createNew = (newObj) => axios.post(baseUrl, newObj).then(res => res.data)\r\nconst deletePerson = (id) => axios.delete(`${baseUrl}/${id}`).then(res => res.status)\r\nconst updatePerson = (id, changedObj) => axios.put(`${baseUrl}/${id}`, changedObj).then(res=>res.data)\r\n\r\n\r\nconst personService = {getAll, createNew, deletePerson, updatePerson}\r\nexport default personService","const Notification = ({message, isError}) => {\r\n\r\n    const msgStyle = {\r\n        color: \"green\",\r\n        border: \"1px green solid\",\r\n        borderRadius: 10,\r\n        textAlign: \"center\",\r\n        padding: 5,\r\n        marginBottom: 10\r\n    }\r\n\r\n    const errStyle={\r\n        ...msgStyle,\r\n        color: \"red\",\r\n        borderColor: \"red\",\r\n\r\n    }\r\n\r\n    if (!message)\r\n        return null\r\n    else\r\n        return (\r\n            <div style={isError ? errStyle : msgStyle}>\r\n                {message}\r\n            </div>\r\n        )\r\n}\r\n\r\nexport default Notification","import React, {useState, useEffect} from \"react\";\r\nimport Filter from \"./components/Filter\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport Persons from \"./components/Persons\";\r\n\r\nimport personService from \"./services/personService\";\r\nimport Notification from \"./components/Notification\";\r\n\r\nconst App = () => {\r\n    const [persons, setPersons] = useState([])\r\n\r\n    const fetchData = () => {\r\n        console.log('starting to fetch data...')\r\n        personService.getAll().then(data => setPersons(data)).catch((reason) => notify(`getAll rejected ${reason}`, true))\r\n    }\r\n    useEffect(fetchData, [])\r\n\r\n\r\n    const [newName, setNewName] = useState('')  // controls form input element\r\n    const [newNumber, setNewNumber] = useState('')\r\n    const [searchName, setSearchName] = useState('')\r\n    const [notificationMsg, setNotificationMsg] = useState('')\r\n    const [isError, setIsError] = useState(false)\r\n    const personsToShow = persons.filter(item => item.name.toLowerCase().search(searchName.toLowerCase()) !== -1)\r\n\r\n\r\n\r\n    const addPerson = (e) => {\r\n        e.preventDefault()\r\n        const match = persons.filter(item => item.name === newName)\r\n        // console.log(match)\r\n\r\n        if (newNumber) {\r\n            if (match.length === 0) {  // check if already exists in the list\r\n                let newPersonObj = {\r\n                    name: newName,\r\n                    number: newNumber\r\n                }\r\n                personService.createNew(newPersonObj)\r\n                    .then((data) => {\r\n                    setPersons(persons.concat(data))\r\n                    notify(`Added ${data.name}`)\r\n                })\r\n                    .catch((err)=>notify(err.response.data.error,true))\r\n\r\n            } else if (match.length === 1 && match[0].number !== newNumber && window.confirm(`${match[0].name} is already exists, replace number?`)) {\r\n                let objToUpdate = match[0]\r\n                personService.updatePerson(objToUpdate.id, {...objToUpdate, number: newNumber})\r\n                    .then(data => {\r\n                        setPersons(persons.map(item => item.id !== objToUpdate.id ? item : data))\r\n                        notify(`Updated ${data.name}`)\r\n                    }).catch((err)=>notify(err.response.data.error,true))\r\n            }\r\n            setNewName('')\r\n            setNewNumber('')\r\n\r\n        }\r\n    }\r\n\r\n    const deletePerson = (id) => {\r\n        if (window.confirm(`Delete ${persons.find(item => item.id === id).name}?`)) {  // window confirmation dialogue\r\n            personService.deletePerson(id)\r\n                .then(status => {\r\n                    if(status === 204) {  // resource deleted gives status 204 - no content\r\n                        let removedName = persons.find((person)=>person.id ===id ).name\r\n                        setPersons(persons.filter(person => person.id !== id))\r\n                        notify(`Deleted ${removedName}`)\r\n                    }\r\n                }).catch((err)=>notify(err.statusText, true))\r\n        }\r\n    }\r\n\r\n    const notify=(msg, signalErr=false)=>{\r\n        console.log(msg)\r\n        setNotificationMsg(msg)\r\n        setIsError(signalErr)\r\n        setTimeout(()=>setNotificationMsg(null), 5000)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h2>Phonebook</h2>\r\n            <Notification message={notificationMsg} isError={isError}/>\r\n            <Filter value={searchName} onChange={e => setSearchName(e.target.value)}/>\r\n            <h3>add new</h3>\r\n            <PersonForm onSubmit={addPerson} namevalue={newName} namechange={e => setNewName(e.target.value)}\r\n                        numbervalue={newNumber} numberchange={e => setNewNumber(e.target.value)}/>\r\n            <h3>Numbers</h3>\r\n            <Persons personsToShow={personsToShow} deletePerson={deletePerson}/>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default App","import ReactDOM from 'react-dom';\nimport App from './App'\n\n\n\nReactDOM.render(<App/>, document.getElementById('root'))"],"sourceRoot":""}